#########################################
# opt/ssh
# Author: Rui Pinheiro
#
# SSH-related functionality


# Returns non-zero if this is an ssh session
# call "is_ssh 1" to get a higher accuracy result, by searching for sshd as a parent process
function is_ssh {
	if [[ -n "$SSH_CONNECTION" || -n "$SSH_CLIENT" || -n "$SSH_TTY" ]]; then
		return 1
	elif is_true "$1" ; then
		case $(ps -o comm= -p $PPID) in
			sshd|*/sshd) return 1
		esac
	fi
	return 0
}

# Call SSH overriding the ForwardX11/ForwardX11Trusted configuration options
alias ssh_x="ssh -o ForwardX11=yes -o ForwardX11Trusted=yes"
alias ssh_nox="ssh -o ForwardX11=no -o ForwardX11Trusted=no"
